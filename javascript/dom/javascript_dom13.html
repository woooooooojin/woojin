<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dom13 05/09</title>


    <script>
        document.addEventListener('DOMContentLoaded', () => {

            document.querySelector('.add_btn').addEventListener('click',function(){

                const subject = document.querySelector('.subject')
                const subjectList = document.querySelector('.subject_list')

                let newP = document.createElement('p')
                let newTxt = document.createTextNode(subject.value)

                newP.appendChild(newTxt);
                
                let newSpan = document.createElement('span')
                let spanTxt = document.createTextNode('X')
                

                newSpan.appendChild(spanTxt)
                newP.appendChild(newSpan)

                newSpan.setAttribute('class','delete')


                // subjectList.appendChild(newP);
                subjectList.insertBefore(newP,subjectList.children[0]) //newP를 subjectlist의 첫번째 위에 넣음
                //insertBefore(추가노드,기준노드)



                subject.value = ''
                subject.focus()
                //앞에입력한것을 초기화 후 커서 깜빡임



                let delBtn = document.querySelectorAll('.delete')

                for(let i = 0; i < delBtn.length; i++){

                    delBtn[i].addEventListener('click',function() {
                        // this.parentNode.parentNode.removeChild(this.parentNode)
                        if(delBtn[i].parentNode.parentNode){
                            this.parentNode.parentNode.removeChild(this.parentNode)
                        }
                    })

                }
                //삭제는 자기자신과 상위부모를 삭제할수없다

            }); //addbtn click event



        
        })
    </script>


    <style>
       
        .delete{
            margin-left: 180px;
            cursor: pointer;
            opacity: 0.5;
        }
        .delete:hover{
            opacity: 1;
            font-weight: bold;
        }
    </style>


</head>

<body>
    
    <div class="container">

        <h2>FE Subject List</h2>

        <form action="#!">

            <input type="text" class="subject" placeholder="과목이름" autofocus>
            <button type="button" class="add_btn">추가</button>

        </form>

        <hr>
        <div class="subject_list">

        </div>

    </div>

</body>

</html>