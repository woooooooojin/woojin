<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>


    <style>
        html,
        body {
            position: relative;
            height: auto
        }

        body {
            background: #eee;
            font-family: Helvetica Neue, Helvetica, Arial, sans-serif;
            font-size: 14px;
            color: #000;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        .wrapper {
            max-width: 1200px;
            width: 75%;
            margin: 0 auto;
        }

        .swiper {
            max-width: 480px;
            width: 100%;
            height: 360px;
            position: relative;
            overflow: visible;
        }

        .swiper-slide {
            max-width: 480px;
            width: 100%;
            height: 360px;
            text-align: center;
            font-size: 18px;
            background: #fff;
            border-radius: 10px;

            /* Center slide text vertically */
            display: -webkit-box;
            display: -ms-flexbox;
            display: -webkit-flex;
            display: flex;
            -webkit-box-pack: center;
            -ms-flex-pack: center;
            -webkit-justify-content: center;
            justify-content: center;
            -webkit-box-align: center;
            -ms-flex-align: center;
            -webkit-align-items: center;
            align-items: center;
        }

        .swiper-slide img {
            display: block;
            width: 100%;
            width: 480px;
            height: 100%;
            object-fit: cover;
        }

        /**/

        .swiper-slide {
            opacity: 0.5;
            transition: opacity 0.5s;
        }

        .swiper-slide-active {
            opacity: 1;
        }

        .changing {
            transition: opacity 0.3s;
            pointer-events: none;
        }

        .changed {
            transition: none;
        }


        /* pagination */
        .mySwiper .swiper-pagination {
            position: absolute;
            bottom: -30px;
            text-align: left;

        }

        /* nav btn*/
        .mySwiper .swiper-button-next,
        .mySwiper .swiper-button-prev {
            top: 50%;
        }

        .mySwiper .swiper-button-prev {
            transform: translateX(-200%);
        }

        .mySwiper .swiper-button-next {
            transform: translateX(200%);
        }

        .custom-fraction {
            text-align: right;
            margin: 15px 5px 0 0;
        }

        .btn-wrapper {
            margin-top: 50px;
        }
    </style>
</head>

<body>
    <div class="wrapper">
        <h1>Swiperjs Slider</h1>
        <!-- Swiper -->
        <div class="swiper mySwiper">
            <div class="swiper-wrapper">
                <div class="swiper-slide">Slide 1</div>
                <div class="swiper-slide">Slide 2</div>
                <div class="swiper-slide">Slide 3</div>
                <div class="swiper-slide">Slide 4</div>
                <div class="swiper-slide">Slide 5</div>
                <div class="swiper-slide">Slide 6</div>
                <div class="swiper-slide">Slide 7</div>
                <div class="swiper-slide">Slide 8</div>
                <div class="swiper-slide">Slide 9</div>
            </div>
            <div class="swiper-pagination"></div>
            <div class="swiper-button-next"></div>
            <div class="swiper-button-prev"></div>
            <div class="custom-fraction">
                <span class="current">1</span>/<span class="all">9
            </div>
        </div>
        <div class="btn-wrapper">
            <button class="auto-start">slide autoplay start</button>
            <button class="auto-stop">slide autoplay stop</button>
        </div>
    </div>








    <script type="module">
        import Swiper from 'https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.esm.browser.min.js'
      
        const swiper = new Swiper('.Swiper')
      </script>
    <script>

        
        $("document").ready(function () {
            // 문서의 dom이 준비되면
            // .mySwiper 클래스를 swiper 슬라이더로 만듦
            // 이후에 swiper변수에 할당했기 때문에 스크립트로 제어할 수도 있음.
            let swiper = new Swiper(".mySwiper", {
                slidesPerView: 'auto',
                spaceBetween: 80,
                loop: true,

                // pagination 기본은 bullet
                pagination: {
                    el: ".swiper-pagination"
                },

                // 좌우 화살표 navigation element 지정
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev"
                },
            

                on: {
                    init: function () {
                        $('.swiper-slide').addClass('changed');

                        // fraction에 현재 인덱스와 전체 인덱스 표시
                        // this.loopedSlides는 loop, slidesPerView: 'auto'일 때 제대로 동작
                        $('.custom-fraction .current').text(this.realIndex + 1);
                        $('.custom-fraction .all').text(this.loopedSlides);
                        // console.log(this);
                        // console.log(this.loopedSlides)
                    },

                    slideChangeTransitionStart: function () {
                        // 기본적으로 제공하는 swiper-slide-active 클래스를 이용해
                        // css transition 애니메이션 작성 가능하다.
                        // 다만 루프 모드일 때에는 루프 픽스를 하며 slide를 바꿔치기를 하는데,
                        // 이 때 플리커링이 발생할 수 있다.
                        // css transition을 서로 다르게 설정한 changed, changing 클래스를 이용
                        $('.swiper-slide').addClass('changing');
                        $('.swiper-slide').removeClass('changed');

                        // 페이지 넘어갈 때마다 fraction 현재 인덱스 변경
                        $('.custom-fraction .current').text(this.realIndex + 1);
                    },

                    slideChangeTransitionEnd: function () {
                        // changing : transition O
                        // changed : transition X
                        $('.swiper-slide').removeClass('changing');
                        $('.swiper-slide').addClass('changed');
                    }
                },
            });

            // 슬라이더 할당한 swiper로 슬라이더 제어
            $(".auto-start").on("click", function () {
                // 기본 설정으로 autoplay 시작
                console.log("autoplay start");
                swiper.autoplay.start();
            });

            $(".auto-stop").on("click", function () {
                console.log("autoplay stop");
                swiper.autoplay.stop();
            });
        });
    </script>

</body>

</html>